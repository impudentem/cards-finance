define(["./core","./var/slice","./callbacks"],function(e,n){return e.extend({Deferred:function(n){var r=[["resolve","done",e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory")]],i="pending",t={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var n=arguments;return e.Deferred(function(i){e.each(r,function(r,s){var c=e.isFunction(n[r])&&n[r];o[s[1]](function(){var n=c&&c.apply(this,arguments);n&&e.isFunction(n.promise)?n.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===t?i.promise():this,c?[n]:arguments)})}),n=null}).promise()},promise:function(n){return null!=n?e.extend(n,t):t}},o={};return t.pipe=t.then,e.each(r,function(e,n){var s=n[2],c=n[3];t[n[1]]=s.add,c&&s.add(function(){i=c},r[1^e][2].disable,r[2][2].lock),o[n[0]]=function(){return o[n[0]+"With"](this===o?t:this,arguments),this},o[n[0]+"With"]=s.fireWith}),t.promise(o),n&&n.call(o,o),o},when:function(r){var i=0,t=n.call(arguments),o=t.length,s=1!==o||r&&e.isFunction(r.promise)?o:0,c=1===s?r:e.Deferred(),a=function(e,r,i){return function(t){r[e]=this,i[e]=arguments.length>1?n.call(arguments):t,i===l?c.notifyWith(r,i):--s||c.resolveWith(r,i)}},l,u,f;if(o>1)for(l=new Array(o),u=new Array(o),f=new Array(o);i<o;i++)t[i]&&e.isFunction(t[i].promise)?t[i].promise().done(a(i,f,t)).fail(c.reject).progress(a(i,u,l)):--s;return s||c.resolveWith(f,t),c.promise()}}),e});
//# sourceMappingURL=./deferred.min.js.map